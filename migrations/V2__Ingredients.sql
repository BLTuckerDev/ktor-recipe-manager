CREATE TABLE IF NOT EXISTS ingredients (id uuid PRIMARY KEY, "name" VARCHAR(255) NOT NULL, category VARCHAR(100) NULL, default_unit VARCHAR(50) NULL, description TEXT NULL, nutrition_per_100g TEXT NULL, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL);
ALTER TABLE ingredients ADD CONSTRAINT ingredients_name_unique UNIQUE ("name");
CREATE TABLE IF NOT EXISTS recipe_ingredients (id uuid PRIMARY KEY, recipe_id uuid NOT NULL, ingredient_id uuid NOT NULL, quantity DECIMAL(10, 3) NULL, unit VARCHAR(50) NULL, notes TEXT NULL, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL, CONSTRAINT fk_recipe_ingredients_recipe_id__id FOREIGN KEY (recipe_id) REFERENCES recipes(id) ON DELETE RESTRICT ON UPDATE RESTRICT, CONSTRAINT fk_recipe_ingredients_ingredient_id__id FOREIGN KEY (ingredient_id) REFERENCES ingredients(id) ON DELETE RESTRICT ON UPDATE RESTRICT);
ALTER TABLE recipe_ingredients ADD CONSTRAINT recipe_ingredients_recipe_id_ingredient_id_unique UNIQUE (recipe_id, ingredient_id);
